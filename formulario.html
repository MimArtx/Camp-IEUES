<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>Inscriﾃｧﾃ｣o | CAMP IEUES</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- CSS -->
  <link rel="stylesheet" href="form-style.css">

  <!-- Fontes -->
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>

<body>

<section class="form-hero">

  <div class="overlay"></div>

  <div class="form-container">

    <h1>INSCRIﾃﾃグ</h1>
    <p>Preencha os dados para confirmar sua presenﾃｧa no Acampadentro.</p>

    <form class="form-box" onsubmit="enviarWhats(event)">

      <!-- NOME -->
      <input
        type="text"
        id="nome"
        name="nome"
        placeholder="Nome completo"
        required
      >

      <!-- IDADE + TELEFONE -->
      <div class="row">

        <input
          type="number"
          id="idade"
          name="idade"
          placeholder="Idade"
          min="5"
          max="120"
          required
        >

        <input
          type="tel"
          id="telefone"
          name="telefone"
          placeholder="Telefone (WhatsApp)"
          pattern="[0-9\s\-\(\)]{8,}"
          required
        >

      </div>

      <!-- CARGO -->
      <select id="cargo" name="cargo" required>
        <option value="">Vocﾃｪ ﾃｩ...</option>
        <option>Jovem</option>
        <option>Juvenil</option>
        <option>Ombreiro</option>
        <option>Lideranﾃｧa</option>
      </select>

      <!-- BOTﾃグ -->
      <button type="submit" id="btnEnviar">
  Confirmar presenﾃｧa
</button>

    </form>

  </div>

</section>

<!-- ================= SCRIPT ================= -->
<script>

function enviarWhats(e){
e.preventDefault();

/* ===== CAPTURA DADOS ===== */

const nome = document.getElementById('nome').value.trim();
const idade = document.getElementById('idade').value.trim();
const telefone = document.getElementById('telefone').value.trim();
const cargo = document.getElementById('cargo').value;

/* ===== VALIDAﾃﾃグ EXTRA ===== */

if(!nome || !idade || !telefone || !cargo){
  alert("Preencha todos os campos.");
  return;
}

/* ===== BOTﾃグ ===== */

const btn = document.getElementById("btnEnviar");

btn.innerText = "Enviando...";
btn.disabled = true;

/* ===== ENVIO GOOGLE PLANILHA ===== */

fetch("https://script.google.com/macros/s/AKfycbyGRoKSMwZlPMLN00XQ_MCPgpamBg9NYbdIm7dthiEYfYrhydR6IsNwwt43qWJFApdc/exec", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    nome: nome,
    idade: idade,
    telefone: telefone,
    cargo: cargo
  })
})
.then(res => res.json())
.then(data => {

  console.log(data);

  /* ===== WHATSAPP ===== */

  const mensagem =
`東 INSCRIﾃﾃグ ACAMPADENTRO IEUES

側 Nome: ${nome}
獅 Idade: ${idade}
導 Telefone: ${telefone}
東 Cargo: ${cargo}

笨 Presenﾃｧa confirmada!`;

  window.open(
  `https://wa.me/5512981151894?text=${encodeURIComponent(mensagem)}`,
  '_blank'
  );

  /* ===== RESET ===== */

  document.querySelector(".form-box").reset();

  btn.innerText = "Confirmar presenﾃｧa";
  btn.disabled = false;

  alert("Inscriﾃｧﾃ｣o enviada com sucesso!");

})
.catch(err => {

  console.error(err);

  alert("Erro ao enviar. Tente novamente.");

  btn.innerText = "Confirmar presenﾃｧa";
  btn.disabled = false;

});

}

</script>
